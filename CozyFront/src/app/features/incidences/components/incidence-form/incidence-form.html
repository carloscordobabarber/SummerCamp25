<form [formGroup]="incidenceForm" (ngSubmit)="onSubmit()" novalidate>
	<div class="form-group">
		<label for="spokesperson" class="label-help">
			Persona de contacto
			<span class="help-icon" tabindex="0">
				&#9432;
				<span class="help-tooltip">
					Rellenar en caso de necesitar que se contacte con alguien diferente al contacto del contrato
				</span>
			</span>
		</label>
		<input id="spokesperson" type="text" formControlName="spokesperson" class="form-control"
			[class.is-invalid]="spokesperson?.invalid && (spokesperson?.touched || spokesperson?.dirty)"
			maxlength="100" />
		<div class="invalid-feedback" *ngIf="spokesperson?.errors && (spokesperson?.touched || spokesperson?.dirty)">
			<span *ngIf="spokesperson?.errors?.['maxlength']">Máximo 100 caracteres.</span>
		</div>
	</div>

	<div class="form-group">
		<label for="apartmentId">Número de apartamento</label>
		<input id="apartmentId" type="number" formControlName="apartmentId" class="form-control" min="1" required
			[class.is-invalid]="apartmentId?.invalid && (apartmentId?.touched || apartmentId?.dirty)" />
		<div class="invalid-feedback" *ngIf="apartmentId?.errors && (apartmentId?.touched || apartmentId?.dirty)">
			<span *ngIf="apartmentId?.errors?.['required']">El número de apartamento es obligatorio.</span>
			<span *ngIf="apartmentId?.errors?.['min']">Debe ser mayor que 0.</span>
		</div>
	</div>

	<div class="form-group">
		<label for="rentalId">Número de contrato</label>
		<input id="rentalId" type="number" formControlName="rentalId" class="form-control" min="1" required
			[class.is-invalid]="rentalId?.invalid && (rentalId?.touched || rentalId?.dirty)" />
		<div class="invalid-feedback" *ngIf="rentalId?.errors && (rentalId?.touched || rentalId?.dirty)">
			<span *ngIf="rentalId?.errors?.['required']">El número de contrato es obligatorio.</span>
			<span *ngIf="rentalId?.errors?.['min']">Debe ser mayor que 0.</span>
		</div>
	</div>

	<div class="form-group">
		<label for="issueType">Tipo de incidencia</label>
		<select id="issueType" formControlName="issueType" class="form-control">
			<option *ngFor="let type of incidenceTypes; let i = index" [value]="i">{{ type }}</option>
		</select>
	</div>

	<div class="form-group">
		<label for="description">Descripción de la incidencia</label>
		<textarea id="description" formControlName="description" class="form-control" rows="4" maxlength="1000"
			[class.is-invalid]="description?.invalid && (description?.touched || description?.dirty)"></textarea>
		<div class="invalid-feedback" *ngIf="description?.errors && (description?.touched || description?.dirty)">
			<span *ngIf="description?.errors?.['required']">La descripción es obligatoria.</span>
			<span *ngIf="description?.errors?.['maxlength']">Máximo 1000 caracteres.</span>
		</div>
	</div>

	<button type="submit" class="btn btn-primary" [disabled]="incidenceForm.invalid">
		Enviar incidencia
	</button>
</form>