<div class="container py-4" *ngIf="apartment">
    <div class="row mb-4">
        <div class="col-md-6">
            <h2 class="mb-3">{{ apartment.code }}</h2>
            <ul class="list-group mb-3">
                <li class="list-group-item"><strong>Dirección: </strong> {{ apartment.door }}</li>
                <li class="list-group-item"><strong>Distrito: </strong> {{ apartment.districtName }}</li>
                <li class="list-group-item"><strong>Calle: </strong> {{ apartment.streetName }}</li>
                <li class="list-group-item"><strong>Planta: </strong> {{ apartment.floor }}</li>
                <li class="list-group-item"><strong>Área: </strong> {{ apartment.area }} m²</li>
                <li class="list-group-item"><strong>Habitaciones: </strong> {{ apartment.numberOfRooms }}</li>
                <li class="list-group-item"><strong>Baños: </strong> {{ apartment.numberOfBathrooms }}</li>
                <li class="list-group-item"><strong>Precio: </strong> <span class="text-success">{{ apartment.price |
                        currency:'EUR':'symbol':'1.0-0' }}</span></li>
                <li class="list-group-item"><strong>Ascensor: </strong> <span
                        [class]="apartment.hasLift ? 'badge bg-success' : 'badge bg-secondary'">{{ apartment.hasLift ?
                        'Sí' : 'No' }}</span></li>
                <li class="list-group-item"><strong>Garaje: </strong> <span
                        [class]="apartment.hasGarage ? 'badge bg-success' : 'badge bg-secondary'">{{ apartment.hasGarage
                        ? 'Sí' : 'No' }}</span></li>
                <li class="list-group-item"><strong>Disponible: </strong> <span
                        [class]="apartment.isAvailable ? 'badge bg-success' : 'badge bg-secondary'">{{
                        apartment.isAvailable ? 'Sí' : 'No' }}</span></li>
            </ul>
        </div>
        <div class="col-md-6 d-flex align-items-center justify-content-center">
            <div *ngIf="getImageUrls().length; else noImg">
                <div class="w-100">
                    <div class="d-flex justify-content-center align-items-center mb-2">
            <div class="carousel-img-container d-flex flex-row align-items-center justify-content-center">
              <button class="btn btn-outline-secondary me-2 d-flex align-items-center justify-content-center carousel-arrow" (click)="prevImage()"
                  [disabled]="getImageUrls().length < 2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                  </svg>
              </button>
              <img [src]="getImageUrls()[currentImageIndex]" class="d-block img-fluid rounded shadow"
                  alt="Imagen {{ currentImageIndex + 1 }}"
                  (error)="onImageError($event)">
              <button class="btn btn-outline-secondary ms-2 d-flex align-items-center justify-content-center carousel-arrow" (click)="nextImage()"
                  [disabled]="getImageUrls().length < 2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
              </button>
            </div>
                    </div>
                    <div class="d-flex justify-content-center">
                        <button *ngFor="let img of getImageUrls(); let idx = index" class="btn btn-sm mx-1"
                            [ngClass]="{'btn-success': idx === currentImageIndex, 'btn-outline-secondary': idx !== currentImageIndex}"
                            (click)="selectImage(idx)">{{ idx + 1 }}</button>
                    </div>
                </div>
            </div>
        </div>
        <ng-template #noImg>
            <div class="text-muted">Sin imagen disponible</div>
        </ng-template>
    </div>
    <div class="row mt-4">
        <div class="col-12 d-flex flex-column align-items-center">
            <div *ngIf="userId; else registerMsg" class="d-flex flex-row align-items-center gap-3">
                <button class="btn btn-primary btn-lg" (click)="onRentNow()" [disabled]="isRenting">
                    ¡Alquilar Ahora!
                </button>
                <input type="date" class="form-control ms-3" style="max-width:180px;" [(ngModel)]="startDate" [min]="todayString" />
            </div>
            <ng-template #registerMsg>
                <div class="alert alert-warning mt-2">Registrese para poder Alquilar</div>
            </ng-template>
            <div *ngIf="rentMessage" class="mt-3 alert" [ngClass]="{'alert-success': rentMessage.includes('éxito'), 'alert-danger': rentMessage.includes('Error'), 'alert-warning': rentMessage.includes('Registrese')}">
                {{ rentMessage }}
            </div>
        </div>
    </div>
</div>