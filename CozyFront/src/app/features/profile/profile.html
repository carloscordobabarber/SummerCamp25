<div class="container-fluid">
  <div class="row min-vh-100">
    <nav class="sidebar col-12 col-md-2 d-flex flex-column align-items-stretch bg-light px-0"
      style="height: 100vh; border-right: 1px solid #dee2e6;">
      <div class="list-group list-group-flush flex-grow-1">
        <a routerLink="/profile" class="list-group-item list-group-item-action"><i class="bi bi-person-fill"></i> Mi
          Perfil</a>
        <a routerLink="/rentals" class="list-group-item list-group-item-action"><i class="bi bi-house-door"></i> Mi
          Alquiler</a>
        <a routerLink="/contracts" class="list-group-item list-group-item-action"><i
            class="bi bi-file-earmark-text"></i> Mi Contrato</a>
        <a routerLink="/incidents" class="list-group-item list-group-item-action"><i
            class="bi bi-exclamation-circle"></i> Mis Incidencias</a>
        <a routerLink="/delete-account" class="list-group-item list-group-item-action list-group-item-danger"><i
            class="bi bi-trash"></i> Eliminar cuenta</a>
      </div>
    </nav>
    <main class="main-content col-12 col-md-10 d-flex flex-column justify-content-start align-items-center"
      style="min-height: 100vh;">
      <div style="margin: 2rem auto 0 auto; width: 100%; max-width: 600px;">
        <h2 class="text-center" style="margin-top: 0;">Perfil de Usuario</h2>
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()" novalidate style="width: 100%; margin-top: 0;">
          <div class="mb-3">
            <label for="fullName" class="form-label">Nombre Completo</label>
            <input id="fullName" type="text" class="form-control" formControlName="fullName"
              [ngClass]="{'is-invalid': fullName?.invalid && fullName?.touched}" />
            <div *ngIf="fullName?.errors && fullName?.touched" class="invalid-feedback">
              <div *ngIf="fullName?.errors?.['required']">El nombre es obligatorio.</div>
              <div *ngIf="fullName?.errors?.['minlength']">Debe tener al menos 3 caracteres.</div>
            </div>
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">Correo Electrónico</label>
            <input id="email" type="email" class="form-control" formControlName="email"
              [ngClass]="{'is-invalid': email?.invalid && email?.touched}" />
            <div *ngIf="email?.errors && email?.touched" class="invalid-feedback">
              <div *ngIf="email?.errors?.['required']">El correo es obligatorio.</div>
              <div *ngIf="email?.errors?.['email']">Correo no válido.</div>
            </div>
          </div>

          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Teléfono</label>
            <input id="phoneNumber" type="tel" class="form-control" formControlName="phoneNumber"
              [ngClass]="{'is-invalid': phoneNumber?.invalid && phoneNumber?.touched}" />
            <div *ngIf="phoneNumber?.errors && phoneNumber?.touched" class="invalid-feedback">
              <div *ngIf="phoneNumber?.errors?.['pattern']">Número inválido. Usa formato internacional (ej:
                +123456789).</div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Actualizar Perfil</button>
        </form>
      </div>
    </main>
  </div>
</div>