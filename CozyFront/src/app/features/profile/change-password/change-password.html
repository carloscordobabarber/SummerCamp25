<div class="change-password-container">
  <h2 class="mb-4">Cambiar Contraseña</h2>
  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="mb-3">
      <label for="currentPassword" class="form-label">Contraseña Actual</label>
      <div class="input-group">
        <input
          [type]="showCurrentPassword ? 'text' : 'password'"
          id="currentPassword"
          class="form-control"
          formControlName="currentPassword"
          [ngClass]="{ 'is-invalid': currentPassword?.invalid && currentPassword?.touched }"
        />
        <button type="button" class="btn btn-outline-secondary" (click)="showCurrentPassword = !showCurrentPassword" tabindex="-1">
          <i class="bi" [ngClass]="showCurrentPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
        </button>
      </div>
      <div *ngIf="currentPassword?.errors && currentPassword?.touched" class="invalid-feedback">
        <div *ngIf="currentPassword?.errors?.['required']">La contraseña actual es obligatoria.</div>
        <div *ngIf="currentPassword?.errors?.['minlength']">Debe tener al menos 6 caracteres.</div>
      </div>
    </div>
    <div class="mb-3">
      <label for="newPassword" class="form-label">Nueva Contraseña</label>
      <div class="input-group">
        <input
          [type]="showNewPassword ? 'text' : 'password'"
          id="newPassword"
          class="form-control"
          formControlName="newPassword"
          [ngClass]="{ 'is-invalid': newPassword?.invalid && newPassword?.touched }"
        />
        <button type="button" class="btn btn-outline-secondary" (click)="showNewPassword = !showNewPassword" tabindex="-1">
          <i class="bi" [ngClass]="showNewPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
        </button>
      </div>
      <div *ngIf="newPassword?.errors && newPassword?.touched" class="invalid-feedback">
        <div *ngIf="newPassword?.errors?.['required']">La nueva contraseña es obligatoria.</div>
        <div *ngIf="newPassword?.errors?.['minlength']">Debe tener al menos 6 caracteres.</div>
      </div>
    </div>
    <div class="mb-4">
      <label for="confirmPassword" class="form-label">Confirmar Nueva Contraseña</label>
      <div class="input-group">
        <input
          [type]="showConfirmPassword ? 'text' : 'password'"
          id="confirmPassword"
          class="form-control"
          formControlName="confirmPassword"
          [ngClass]="{ 'is-invalid': confirmPassword?.invalid && confirmPassword?.touched }"
        />
        <button type="button" class="btn btn-outline-secondary" (click)="showConfirmPassword = !showConfirmPassword" tabindex="-1">
          <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
        </button>
      </div>
      <div *ngIf="confirmPassword?.errors && confirmPassword?.touched" class="invalid-feedback">
        <div *ngIf="confirmPassword?.errors?.['required']">Por favor confirma la nueva contraseña.</div>
        <div *ngIf="confirmPassword?.errors?.['mismatch']">Las contraseñas no coinciden.</div>
      </div>
    </div>
    <div class="d-grid">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="passwordForm.invalid"
      >
        Cambiar Contraseña
      </button>
    </div>
  </form>
</div>

